<!DOCTYPE html>
<style>
  h1{
    text-align: center;
  }
  .box {
    position: absolute;
    width: 600px;
    height: 858px;
    background-color: rgb(241, 244, 244);
    left: 50%;
    transform: translate(-50%);
  }
  .box2{
    margin: 10px 10px 10px 0px;
  }
  .User {
    margin-top: 20px;
    text-align: left;
    display: flex;
    align-items:center;
  }
  .boxx{
    margin: 5px;
  }
  .Url {
    border-radius:3px;
    width: 50px;
    height: 52px;
  }
  .shuru{
    width:500px ;
    height: 30px;
    outline:none;
    border: 0.5px solid gray;
    border-radius: 5px;
  }
  .post{
    width:80px ;
    height: 35px;
    color: rgb(255, 255, 255);
    border: 0;
    background-color: rgb(11, 139, 134);
    border-radius: 5px;
  }
  .post:hover{
    background-color: rgb(19, 107, 104);
  }
  .rename{
    width:70px ;
    height: 30px;
    color: rgb(255, 255, 255);
    border: 0;
    background-color: rgb(75, 232, 227);
    border-radius: 5px;
  }
  .rename:hover{
    background-color: rgb(171, 243, 241);
  }
  .name{
    padding: 3px;
    width:150px ;
    height: 20px;
    border: 0.5px solid gray;
    border-radius: 5px;
  }
</style>
<html>
  <body>
    <div class="div">
      <h1>èŠå¤©å®¤</h1>
      <!-- <button class="rename">ä¿®æ”¹æ˜µç§°</button> -->
      <!-- <h2>ä¸€äº›ä»‹ç»ï¼šhttps://chovrio.club/chatroom/</h2> -->
      <div class="box">
        <input type="text" class="shuru"/>
        <button class="post">å‘é€æ¶ˆæ¯</button>
      </div>
    </div>
    <script>
     //æƒ³å†™æ”¹æ˜µç§°ä½†å¥½åƒä¸å¤ªèƒ½æ”¹
      // let rename=document.querySelector(".rename");
      // let a=0;
      // const img="https://img2.baidu.com/it/u=3780108527,1887608868&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1669741200&t=1c4c20a805cdf03375e22657b6c67fbb"
      // let ws; // ç›‘å¬åœ°å€ç«¯å£å·
      // rename.addEventListener("click",()=>{
      //      if(a==0){
      //     var name1 = document.createElement("input");
      //      name1.className="name"
      //      name1.setAttribute("type","text");
      //      let div = document.querySelector(".div");
      //      let div1 = document.createElement("div1");
      //      div1.className="box2"
      //      div1.append(name1)
      //      document.querySelector(".div").append(div1);
      //      rename.innerHTML="ç¡®è®¤"
      //      }
      //      ws = new WebSocket("ws://chatroom.chovrio.club/")
      //     a++;
      //     console.log(a);
      //     alert(a)
      //     })
        let name="é¼ æ ‡ä¾ "
        const img="https://img2.baidu.com/it/u=3780108527,1887608868&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1669741200&t=1c4c20a805cdf03375e22657b6c67fbb"
        let url="ws://chatroom.chovrio.club/?name="+name+"&url="+img;
        const ws = new WebSocket(url); // ç›‘å¬åœ°å€ç«¯å£å·
      // å»ºç«‹è¿æ¥å
      ws.onopen = function () {
        console.log("æœåŠ¡å™¨è¿æ¥");
      };
      // æœåŠ¡å™¨å‘é€æ•°æ®å
  
      ws.onmessage = ({ data }) => {
        const resData = JSON.parse(data); 
        console.log("æœåŠ¡ç«¯å‘è¿‡æ¥æ•°æ®", resData);
        const div = document.createElement("div");
        div.className = "User";
        const img = document.createElement("img");
        img.className = "Url";
        img.src = resData.url;
        const name = document.createElement("div");
        const content=document.createElement("span");
        const boxx = document.createElement("div");
        boxx.className="boxx"
        if(resData.nickname=="é¼ æ ‡ä¾ "){
           div.style.flexDirection="row-reverse";
        }
        content.innerHTML=resData.message;
        name.innerHTML = resData.nickname;
        name.style.color="gray";
        name.style.fontSize="7px";
        name.style.textAlign="center";
        boxx.append(name);   
        boxx.append(img);
        div.append(boxx);
        div.append(content);
        document.querySelector(".box").append(div);
      }; 
      // æœåŠ¡å™¨å…³é—­å
      ws.onclose = () => {
        console.log("æœåŠ¡å™¨å…³é—­");
      };
      // æ˜µç§°ä¿®æ”¹
      function nickUpdateClick(name) {
        if (ws.readyState === WebSocket.OPEN) {
          ws.send(JSON.stringify(name));
        }
      }

      // å‘é€æ¶ˆæ¯
      function sendMessageClick(msg) {
        if (ws.readyState === WebSocket.OPEN) {
          ws.send(JSON.stringify(msg));
        }
      }

      document.querySelector(".post").addEventListener("click", () => {
      
        console.log(111);
        let remark=document.querySelector("input")
        if(remark.value.length>25){
          const result=confirm("å°‘ä¾ ç»™ä¸ªé¢å­å°‘è¯´ç‚¹å§ğŸ¤«");
          if(result==true){
          alert("æˆ‘æ˜¯æ‡’ç‹—");
         }else{
          alert("è°ƒçš®å•Š");
           remark.value=" ";
        }
        }else if(remark.value.length==0){
          alert("è¯´ç‚¹å•¥å˜›ğŸ˜")
        }else{
          sendMessageClick(remark.value);
          remark.value=" ";
        }
      
      });
    
    </script>
  </body>
</html>
<!-- lv3å…¶å®åšä¸åšéƒ½æ— æ‰€è°“çš„ï¼Œç®€å•è¯´ä¸€ä¸‹lv3å§ã€‚lv3å…¶å®æ˜¯ä¸€ä¸ªåœ¨çº¿èŠå¤©å®¤ï¼Œåœ¨/chatroomé‚£ä¸ªæ¥å£é‡Œé¢æˆ‘å·²ç»è¿”å›äº†æˆ‘å†™å¥½çš„ä¸€äº›å†…å®¹ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œå°†å®ƒå®Œå–„æˆä¸€ä¸ªçœŸæ­£çš„èŠå¤©å®¤(å†™å†™æ ·å¼å°±è¡Œäº†)ï¼Œå‘é€æ¶ˆæ¯çš„å‡½æ•°æˆ‘å·²ç»å†™å¥½äº†ï¼Œå¦å¤–å»ºç«‹è¿æ¥çš„æ—¶å€™å¯ä»¥æºå¸¦paramså‚æ•°/chatroo,?name=?&url=?ã€‚nameæ˜¯åå­—ï¼Œurlæ˜¯å¤´åƒï¼Œä¸æºå¸¦çš„è¯å°±æ˜¯é»˜è®¤çš„
æˆ‘æ˜¯æ‡’ç‹—ä¸æƒ³å†™æ ·å¼ -->